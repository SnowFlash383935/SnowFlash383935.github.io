---
layout: default
title: "Поиск"
description: "Поиск по всем постам"
permalink: /search
sitemap: false
---
<ul id="results"></ul>
<script>
  // Получаем текущий URL
  const urlParams = new URLSearchParams(window.location.search);
  // Получаем конкретные значения
  const query = urlParams.get('query');
  
  if (query) {
    fetch("/search.json")
      .then(response => response.json())
      .then(posts => {
        const resultsContainer = document.getElementById('results');
        
        const filteredPosts = posts.filter(post => 
          post.title.toLowerCase().includes(query.toLowerCase()) ||
          (post.description && post.description.toLowerCase().includes(query.toLowerCase())) ||
          (post.excerpt && post.excerpt.toLowerCase().includes(query.toLowerCase()))
        );
        
        if (filteredPosts.length === 0) {
          resultsContainer.innerHTML = '<p>Ничего не найдено</p>';
          return;
        }
        
        filteredPosts.forEach(post => {
          // Создаем элемент списка
          const listItem = document.createElement('li');
          listItem.className = 'article-list-item';
          
          // Создаем ссылку
          const link = document.createElement('a');
          link.href = post.url;
          link.title = post.title;
          
          // Создаем заголовок
          const heading = document.createElement('h5');
          heading.textContent = post.title;
          
          // Добавляем стрелочку как текст
          const arrowIcon = document.createElement('span');
          arrowIcon.innerHTML = ' →';
          heading.appendChild(arrowIcon);
          
          link.appendChild(heading);
          
          // Создаем описание
          const description = document.createElement('p');
          description.textContent = post.description || post.excerpt || '';
          
          // Создаем footer
          const footer = document.createElement('div');
          footer.className = 'article-info-footer';
          
          // Добавляем дату если есть
          if (post.date) {
            const dateSpan = document.createElement('span');
            dateSpan.className = 'article-date';
            const postDate = new Date(post.date);
            dateSpan.textContent = postDate.toLocaleDateString('ru-RU', {
              year: 'numeric',
              month: 'long',
              day: 'numeric'
            });
            footer.appendChild(dateSpan);
          }
          
          // Собираем все вместе
          listItem.appendChild(link);
          listItem.appendChild(description);
          listItem.appendChild(footer);
          
          resultsContainer.appendChild(listItem);
        });
      })
      .catch(error => {
        console.error('Ошибка при загрузке постов:', error);
        document.getElementById('results').innerHTML = '<p>Ошибка загрузки результатов</p>';
      });
  } else {
    document.getElementById('results').innerHTML = '<p>Введите поисковый запрос</p>';
  }
</script>
