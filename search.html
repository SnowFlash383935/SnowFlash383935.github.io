---
layout: default
title: "Поиск"
description: "Поиск по всем постам"
permalink: /search
sitemap: false
---
<ul id="results"></ul>
<script>
  // Получаем текущий URL
  const urlParams = new URLSearchParams(window.location.search);
  // Получаем конкретные значения
  const query = urlParams.get('query');
  
  if (query) {
    fetch("/search.json")
      .then(response => response.json())
      .then(posts => {
        const resultsContainer = document.getElementById('results');
        let htmlContent = '';
        
        const filteredPosts = posts.filter(post => 
          post.title.toLowerCase().includes(query.toLowerCase()) ||
          (post.description && post.description.toLowerCase().includes(query.toLowerCase())) ||
          (post.excerpt && post.excerpt.toLowerCase().includes(query.toLowerCase()))
        );
        
        if (filteredPosts.length === 0) {
          resultsContainer.innerHTML = '<p>Ничего не найдено</p>';
          return;
        }
        
        filteredPosts.forEach(post => {
          htmlContent += '<li class="article-list-item">' +
            '<a href="' + post.url + '" title="' + post.title + '">' +
              '<h5>' +
                post.title +
                '<svg class="icon-arrow-right" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">' +
                  '<path d="M14 8L8 2V6H2V10H8V14L14 8Z" fill="currentColor"/>' +
                '</svg>' +
              '</h5>' +
            '</a>' +
            '<p>' +
              (post.description || post.excerpt || '') +
            '</p>' +
            '<div class="article-info-footer">' +
              (post.date ? '<span class="article-date">' + new Date(post.date).toLocaleDateString('ru-RU') + '</span>' : '') +
            '</div>' +
          '</li>';
        });
        
        resultsContainer.innerHTML = htmlContent;
      })
      .catch(error => {
        console.error('Ошибка при загрузке постов:', error);
        document.getElementById('results').innerHTML = '<p>Ошибка загрузки результатов</p>';
      });
  } else {
    document.getElementById('results').innerHTML = '<p>Введите поисковый запрос</p>';
  }
</script>
