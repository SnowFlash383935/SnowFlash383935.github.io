---
layout: default
title: "Поиск"
description: "Поиск по всем постам"
permalink: /search
sitemap: false
---

<div id="search-results">
  <ul class="article-list">
    {% for post in site.posts %}
      <li class="article-list-item {% if site.scrollappear_enabled %}scrollappear{% endif %} hidden-post" data-title="{{ post.title | downcase }}" data-description="{{ post.description | downcase }}" data-excerpt="{{ post.excerpt | strip_html | downcase }}">
        <a href="{{ post.url | relative_url }}" title="{{ post.title }}">
          <h5>
            {{ post.title }}
            {% include svg-icon.html icon="arrow-right" %}
          </h5>
        </a>
        <p>
          {% if post.description %}
            {{ post.description }}  
          {% else %}
            {{ post.excerpt }}
          {% endif %}
        </p>
        {% include article/info-footer.html post=post %}
      </li>
    {% endfor %}
  </ul>
</div>

<script>
  // Получаем текущий URL и параметр поиска
  const urlParams = new URLSearchParams(window.location.search);
  const query = urlParams.get('query');
  
  // Если есть поисковый запрос
  if (query) {
    // Получаем все посты
    const posts = document.querySelectorAll('.article-list-item');
    let foundCount = 0;
    
    // Проходим по всем постам
    posts.forEach(post => {
      const title = post.getAttribute('data-title') || '';
      const description = post.getAttribute('data-description') || '';
      const excerpt = post.getAttribute('data-excerpt') || '';
      
      // Проверяем совпадение с запросом
      if (title.includes(query.toLowerCase()) || 
          description.includes(query.toLowerCase()) || 
          excerpt.includes(query.toLowerCase())) {
        // Показываем совпадающие посты
        post.classList.remove('hidden-post');
        foundCount++;
      } else {
        // Скрываем несовпадающие посты
        post.classList.add('hidden-post');
      }
    });
    
    // Если ничего не найдено
    if (foundCount === 0) {
      document.getElementById('search-results').innerHTML = '<p>Ничего не найдено по запросу: "' + query + '"</p>';
    }
  } else {
    // Если нет запроса, скрываем все посты
    const posts = document.querySelectorAll('.article-list-item');
    posts.forEach(post => {
      post.classList.add('hidden-post');
    });
    document.getElementById('search-results').innerHTML = '<p>Введите поисковый запрос в форму выше</p>';
  }
</script>

<style>
  .hidden-post {
    display: none !important;
  }
</style>
